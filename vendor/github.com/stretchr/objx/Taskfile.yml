version: '2'

<<<<<<< HEAD
env:
  GOFLAGS: -mod=vendor

tasks:
  default:
    deps: [test]

  lint:
    desc: Checks code style
    cmds:
      - gofmt -d -s *.go
      - go vet ./...
    silent: true

  lint-fix:
    desc: Fixes code style
    cmds:
      - gofmt -w -s *.go

  test:
    desc: Runs go tests
    cmds:
      - go test -race  ./...

  test-coverage:
    desc: Runs go tests and calucates test coverage
    cmds:
      - go test -race -coverprofile=c.out ./...
=======
dl-deps:
  desc: Downloads cli dependencies
  cmds:
    - go get -u github.com/golang/lint/golint
    - go get -u github.com/golang/dep/cmd/dep

update-deps:
  desc: Updates dependencies
  cmds:
    - dep ensure
    - dep ensure -update
    - dep prune

lint:
  desc: Runs golint
  cmds:
    - golint $(ls *.go | grep -v "doc.go")
  silent: true

test:
  desc: Runs go tests
  cmds:
    - go test -race  .
>>>>>>> update vendor with go mod vendor
